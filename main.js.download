const u=document.querySelector(".nav"),i=document.querySelector(".toggle-menu"),l=document.querySelector(".toggle-appearance"),a=document.querySelector(".search-form"),r=a.querySelector("input"),t=a.querySelector("ul"),m=document.querySelector(".search-back-btn"),n=document.querySelector(".overlay");function h(s,c){const o="suggest_"+Math.round(1e5*Math.random()),e=document.createElement("script");e.src=`${s}${s.indexOf("?")>=0?"&":"?"}&callback=${o}`,document.body.appendChild(e),window[o]=d=>{delete window[o],document.body.removeChild(e),c(d)}}function v(){const s=new IntersectionObserver(c=>{c.forEach(o=>{if(o.isIntersecting){const e=o.target;e.src=e.dataset.src,e.srcset=e.dataset.srcset,e.onload=()=>{e.classList.add("loaded")},s.unobserve(e)}})});document.querySelectorAll("img.lazy").forEach(c=>{s.observe(c)})}i.addEventListener("click",function(s){s.preventDefault(),u.classList.contains("opened")?(u.classList.remove("opened"),i.querySelector(".bar").classList.remove("hidden"),i.querySelector(".dismiss").classList.add("hidden")):(u.classList.add("opened"),i.querySelector(".bar").classList.add("hidden"),i.querySelector(".dismiss").classList.remove("hidden"))});document.documentElement.classList.contains("dark")&&(l.querySelector(".sun").classList.add("hidden"),l.querySelector(".moon").classList.remove("hidden"));l.addEventListener("click",s=>{s.preventDefault(),document.documentElement.classList.contains("dark")?(localStorage.setItem("theme","light"),document.documentElement.classList.remove("dark"),l.querySelector(".sun").classList.remove("hidden"),l.querySelector(".moon").classList.add("hidden")):(localStorage.setItem("theme","dark"),document.documentElement.classList.add("dark"),l.querySelector(".sun").classList.add("hidden"),l.querySelector(".moon").classList.remove("hidden"))});document.querySelectorAll(".has-children").forEach(s=>{s.querySelector("a").addEventListener("click",function(c){c.preventDefault()})});r.addEventListener("keyup",s=>{const c=[];if(s.code==="ArrowUp"||s.code==="ArrowDown"){if(t.classList.contains("show")){let o=!1;const e=t.querySelector("li.active");e?s.code==="ArrowUp"&&e.previousElementSibling||s.code==="ArrowDown"&&e.nextElementSibling?(e.classList.remove("active"),s.code==="ArrowUp"&&e.previousElementSibling?e.previousElementSibling.classList.add("active"):e.nextElementSibling.classList.add("active"),r.value=t.querySelector("li.active").textContent):o=!0:t.querySelector("li:first-child").classList.add("active"),o||t.querySelector(".active").scrollIntoView({block:"nearest",behavior:"smooth"})}}else h(`https://suggestqueries.google.com/complete/search?q=${s.target.value}&hl=us&client=youtube-reduced&ds=yt&callback=supermp3`,o=>{if(o!=null&&o[1]&&o[1].length){if(c.push(...o[1].map(e=>e[0])),t.innerHTML="",c.length){n.classList.add("show"),t.classList.add("show");for(const e of c)t.innerHTML+=`<li>${e}</li>`}else n.classList.remove("show"),t.classList.remove("show");t.querySelectorAll("li").forEach(e=>{e.addEventListener("mousedown",d=>{d.preventDefault(),n.classList.remove("show"),t.classList.remove("show"),r.value=e.textContent,a.submit()})})}else n.classList.remove("show"),t.classList.remove("show")})});r.addEventListener("keydown",s=>{s.code==="Enter"&&(r.blur(),a.submit())});r.addEventListener("focus",()=>{t.querySelectorAll("li").length&&!t.classList.contains("show")&&(n.classList.add("show"),t.classList.add("show"))});r.addEventListener("blur",()=>{t.classList.contains("show")&&(n.classList.remove("show"),t.classList.remove("show"))});m&&m.addEventListener("click",s=>{s.preventDefault(),window.history.back()});v();